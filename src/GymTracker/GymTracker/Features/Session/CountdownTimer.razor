@using System.Timers

@inject CountdownTimerState timerState

<h4>CountdownTimer</h4>
<h2>@timerState.TimeRemaining.ToString(@"mm\:ss\:fff")</h2>
<MudButton Variant="Variant.Filled" Size="Size.Small" OnClick="handleStart">Start</MudButton>

@code {
    protected override void OnInitialized()
    {
        timerState.OnStateChange += StateHasChanged;
        base.OnInitialized();
    }

    private void handleStart() => timerState.StartTimer();

    public void Dispose()
    {
        timerState.OnStateChange -= StateHasChanged;
    }
}
